# 💝 給主人的告白 - 功能說明

## 全新功能！

這是專為狗狗和主人設計的感人影片生成系統。

---

## 🎯 功能特色

### 核心概念
- **不是故事，是告白** - 以狗狗的第一人稱表達對主人的愛
- **5 個影片** - 每個約 15 秒，展現不同的溫馨時刻
- **連貫對白** - 從日常陪伴到深刻情感，層層遞進
- **結尾圖片** - 最後一張狗狗照片 + 最感人的一句話
- **純音樂** - 移除原音，只保留背景音樂和旁白

---

## 🎬 使用流程

### 步驟 1：填寫狗狗資訊
- 狗狗名字（必填）
- 品種（可選）

### 步驟 2：上傳 5 個影片
- 選擇與狗狗互動的溫馨片段
- 每個影片會被剪輯成約 15 秒
- 支援 MP4、MOV、AVI 格式

### 步驟 3：上傳結尾圖片
- 選擇一張狗狗的照片
- 作為影片結尾
- 支援 JPG、PNG 格式

### 步驟 4：等待處理
- AI 分析影片內容
- 創作感人的告白對白
- 生成 TTS 語音旁白
- 加入字幕和背景音樂
- 合成最終影片

### 步驟 5：觀看與下載
- 查看 5 段告白對白
- 播放最終影片
- 下載保存

---

## 🎤 對白風格

### 範例對白

**第 1 段**（日常陪伴）
```
主人，每次看到你回家，我的尾巴就停不下來，
因為你就是我全部的世界。
```

**第 2 段**（快樂時光）
```
和你一起玩耍的每一刻，都是我最快樂的時光，
你的笑容是我最喜歡的獎勵。
```

**第 3 段**（安心依靠）
```
當我依偎在你懷裡，聽著你的心跳，
我知道這就是家的感覺。
```

**第 4 段**（深刻情感）
```
雖然我不會說話，但我的眼神告訴你，
你是我這輩子最愛的人。
```

**第 5 段**（最深的愛）
```
無論何時何地，我都會守護在你身邊，
因為你給了我生命中所有的愛與溫暖。
```

**結尾圖片文字**
```
謝謝你，愛我的主人
```

---

## 🎨 影片特色

### 視覺效果
- ✅ 每段約 15 秒（5 段共約 75 秒）
- ✅ 最後 5 秒結尾圖片
- ✅ 白色字幕 + 黑色邊框
- ✅ 底部居中顯示

### 音訊效果
- ✅ 移除原影片聲音
- ✅ 柔和的背景音樂
- ✅ 溫馨的女聲旁白（如啟用 TTS）
- ✅ 音樂音量 15%（不蓋過旁白）

### 結尾畫面
- ✅ 狗狗的照片（居中顯示）
- ✅ 感人的文字疊加
- ✅ 5 秒靜止畫面
- ✅ 溫馨的氛圍

---

## 📊 技術實作

### 影片處理
1. **分析**：AI 識別每個影片的互動場景
2. **剪輯**：截取最精彩的 15 秒片段
3. **去音**：移除原影片聲音
4. **對白**：AI 生成狗狗的告白對白
5. **語音**：TTS 轉換為女聲旁白
6. **字幕**：自動加入字幕
7. **音樂**：加入背景音樂
8. **結尾**：加入圖片和文字

### API 端點
```
POST /api/v2/story/projects
  - 建立專案

POST /api/v2/story/projects/:id/videos
  - 上傳 5 個影片

POST /api/v2/story/projects/:id/ending-image
  - 上傳結尾圖片

POST /api/v2/story/projects/:id/generate
  - 生成告白影片

GET /api/v2/story/projects/:id
  - 查詢處理狀態
```

---

## 🎯 與原版的區別

| 功能 | 原版（故事模式）| 新版（告白模式）|
|------|----------------|----------------|
| 內容方向 | 第三人稱故事 | 狗狗第一人稱告白 |
| 影片數量 | 不限 | 固定 5 個 |
| 影片長度 | 不限 | 每個約 15 秒 |
| 結尾 | 無 | 圖片 + 感人文字 |
| 原音 | 保留 | 移除 |
| 對白風格 | 旁白敘述 | 深情告白 |

---

## 💡 使用建議

### 選擇影片時
1. **影片 1-2**：日常互動（撫摸、玩耍）
2. **影片 3-4**：親密時刻（依偎、親吻）
3. **影片 5**：最溫馨的畫面

### 結尾圖片
- 選擇狗狗最可愛的照片
- 清晰、光線充足
- 最好是與主人的合照

---

## 🚀 訪問方式

### 網頁 UI
```
http://localhost:8080/love-story
```

### 完整流程
1. 開啟網頁
2. 填寫狗狗資訊
3. 上傳 5 個影片
4. 上傳結尾圖片
5. 等待 AI 處理
6. 觀看並下載影片

---

## ⚙️ 處理時間

### 預估時間（5 個影片）
- 影片分析：約 2 分鐘
- 故事生成：約 30 秒
- TTS 生成：約 30 秒
- 影片合成：約 1 分鐘
- **總計：約 4-5 分鐘**

---

## 🎨 自訂選項

### 修改對白風格
在 `main.go` 的 prompt 中修改：
```go
範例風格：
「主人，每次看到你回家，我的尾巴就停不下來...」
```

### 修改結尾時長
```go
"-t", "5",  // 改為其他秒數
```

### 修改字幕樣式
```go
fontSize=36  // 字體大小
fontcolor=white  // 文字顏色
```

---

## 📖 完整範例

**輸入**
- 狗狗名字：豆豆
- 品種：吉娃娃
- 5 個影片（共約 2 分鐘）
- 1 張結尾圖片

**輸出**
- 標題：「給主人的告白」
- 5 段告白對白（每段 15 秒）
- 結尾圖片（5 秒）
- 總時長：約 80 秒
- 包含：字幕 + 背景音樂 + 旁白

---

**這是一個完整的感人影片生成系統，專為狗狗和主人的情感表達設計！** 💝🐕

立即體驗：http://localhost:8080/love-story
