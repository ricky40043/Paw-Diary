[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /assets/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (4 handlers)
[GIN-debug] HEAD   /assets/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (4 handlers)
[GIN-debug] GET    /                         --> main.main.(*RouterGroup).StaticFile.func14 (4 handlers)
[GIN-debug] HEAD   /                         --> main.main.(*RouterGroup).StaticFile.func14 (4 handlers)
[GIN-debug] GET    /storage/*filepath        --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (4 handlers)
[GIN-debug] HEAD   /storage/*filepath        --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (4 handlers)
[GIN-debug] POST   /api/v1/poc/jobs          --> main.main.func1 (4 handlers)
[GIN-debug] GET    /api/v1/poc/jobs/:jobId   --> main.main.func2 (4 handlers)
[GIN-debug] GET    /api/v1/poc/jobs          --> main.main.func3 (4 handlers)
[GIN-debug] GET    /api/health               --> main.main.func4 (4 handlers)
[GIN-debug] POST   /api/v2/story/projects    --> main.main.func5 (4 handlers)
[GIN-debug] POST   /api/v2/story/projects/:projectId/ending-image --> main.main.func6 (4 handlers)
[GIN-debug] POST   /api/v2/story/projects/:projectId/owner-message --> main.main.func7 (4 handlers)
[GIN-debug] POST   /api/v2/story/projects/:projectId/videos --> main.main.func8 (4 handlers)
[GIN-debug] POST   /api/v2/story/projects/:projectId/generate --> main.main.func9 (4 handlers)
[GIN-debug] GET    /api/v2/story/projects/:projectId --> main.main.func10 (4 handlers)
[GIN-debug] GET    /api/v2/story/projects    --> main.main.func11 (4 handlers)
2025/12/08 20:33:00 Server starting on port 8080
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
[GIN-debug] Listening and serving HTTP on :8080
[GIN] 2025/12/08 - 20:33:08 | 200 |     132.334Âµs |             ::1 | GET      "/api/health"
[GIN] 2025/12/08 - 20:33:08 | 200 |     812.375Âµs |             ::1 | POST     "/api/v2/story/projects"
[GIN] 2025/12/08 - 20:33:09 | 200 |  471.520291ms |             ::1 | POST     "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de/videos"
2025/12/08 20:33:09 Ending image saved for project 68d695a7-a5c3-433d-a303-64e8cbe195de: storage/projects/68d695a7-a5c3-433d-a303-64e8cbe195de/ending_image.jpg
[GIN] 2025/12/08 - 20:33:09 | 200 |      242.25Âµs |             ::1 | POST     "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de/ending-image"
[GIN] 2025/12/08 - 20:33:09 | 200 |      13.458Âµs |             ::1 | POST     "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de/generate"
2025/12/08 20:33:09 Processing project 68d695a7-a5c3-433d-a303-64e8cbe195de with 5 videos
2025/12/08 20:33:09 Analyzing video f6cf025a-6829-46ff-bd51-9895e247daae (786639289.386967.mp4)
2025/12/08 20:33:09 Owner message saved for project 68d695a7-a5c3-433d-a303-64e8cbe195de: å¯¶è²ï¼Œè¬è¬ä½ ä¾†åˆ°æˆ‘çš„ç”Ÿå‘½ä¸­ï¼Œæˆ‘æœƒæ°¸é æ„›ä½ ï¼
[GIN] 2025/12/08 - 20:33:09 | 200 |      127.75Âµs |             ::1 | POST     "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de/owner-message"
[GIN] 2025/12/08 - 20:33:09 | 200 |      35.625Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
2025/12/08 20:33:09 Extracted 12 frames from video f6cf025a-6829-46ff-bd51-9895e247daae
2025/12/08 20:33:09 Video f6cf025a-6829-46ff-bd51-9895e247daae: Analyzing with 10 images (total frames: 12)
2025/12/08 20:33:10 Successfully compressed 10 images for video f6cf025a-6829-46ff-bd51-9895e247daae
[GIN] 2025/12/08 - 20:33:14 | 200 |       71.75Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
2025/12/08 20:33:16 âœ… Video f6cf025a-6829-46ff-bd51-9895e247daae analyzed: has_dog=true, has_human=true, interaction=cuddling, emotion=happy, caption=ä¸»äººèˆ‡æ„›çŠ¬æº«é¦¨äº’å‹•
2025/12/08 20:33:16 Analyzed video f6cf025a-6829-46ff-bd51-9895e247daae: 4 segments, 1 highlights
2025/12/08 20:33:16 Analyzing video fb899996-7858-47ed-a5a0-fc3b8c88947e (786639326.131658.mp4)
2025/12/08 20:33:17 Extracted 33 frames from video fb899996-7858-47ed-a5a0-fc3b8c88947e
2025/12/08 20:33:17 Video fb899996-7858-47ed-a5a0-fc3b8c88947e: Analyzing with 10 images (total frames: 33)
2025/12/08 20:33:17 Successfully compressed 10 images for video fb899996-7858-47ed-a5a0-fc3b8c88947e
[GIN] 2025/12/08 - 20:33:19 | 200 |      80.583Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
2025/12/08 20:33:23 âœ… Video fb899996-7858-47ed-a5a0-fc3b8c88947e analyzed: has_dog=true, has_human=true, interaction=playing, emotion=happy, caption=å°ç‹—èˆ‡ä¸»äººåœ¨åºŠä¸Šé–‹å¿ƒç©è€
2025/12/08 20:33:23 Analyzed video fb899996-7858-47ed-a5a0-fc3b8c88947e: 11 segments, 1 highlights
2025/12/08 20:33:23 Analyzing video ced8fc77-1d4f-416f-90c5-ab23140c4d5a (786639326.180172.mp4)
2025/12/08 20:33:23 Extracted 11 frames from video ced8fc77-1d4f-416f-90c5-ab23140c4d5a
2025/12/08 20:33:23 Video ced8fc77-1d4f-416f-90c5-ab23140c4d5a: Analyzing with 10 images (total frames: 11)
2025/12/08 20:33:24 Successfully compressed 10 images for video ced8fc77-1d4f-416f-90c5-ab23140c4d5a
[GIN] 2025/12/08 - 20:33:24 | 200 |        63.5Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
[GIN] 2025/12/08 - 20:33:29 | 200 |     142.958Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
2025/12/08 20:33:29 âœ… Video ced8fc77-1d4f-416f-90c5-ab23140c4d5a analyzed: has_dog=true, has_human=true, interaction=cuddling, emotion=calm, caption=å°ç‹—åœ¨ä¸»äººæ‡·ä¸­å®‰éœä¼‘æ¯
2025/12/08 20:33:29 Analyzed video ced8fc77-1d4f-416f-90c5-ab23140c4d5a: 4 segments, 1 highlights
2025/12/08 20:33:29 Analyzing video 8f06ff56-77d6-430a-aac0-1fe8bf1a6c93 (786648877.005224.mp4)
2025/12/08 20:33:29 Extracted 15 frames from video 8f06ff56-77d6-430a-aac0-1fe8bf1a6c93
2025/12/08 20:33:29 Video 8f06ff56-77d6-430a-aac0-1fe8bf1a6c93: Analyzing with 10 images (total frames: 15)
2025/12/08 20:33:30 Successfully compressed 10 images for video 8f06ff56-77d6-430a-aac0-1fe8bf1a6c93
[GIN] 2025/12/08 - 20:33:34 | 200 |     255.917Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
[GIN] 2025/12/08 - 20:33:39 | 200 |     251.916Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
2025/12/08 20:33:39 âœ… Video 8f06ff56-77d6-430a-aac0-1fe8bf1a6c93 analyzed: has_dog=true, has_human=true, interaction=playing, emotion=excited, caption=æ´»æ½‘å°ç‹—åœ¨å®¶ä¸­èˆ‡ä¸»äººç©è€ã€‚
2025/12/08 20:33:39 Analyzed video 8f06ff56-77d6-430a-aac0-1fe8bf1a6c93: 5 segments, 1 highlights
2025/12/08 20:33:39 Analyzing video a2cb4dce-3e06-49ef-8db4-da0344698817 (786648896.976533.mp4)
2025/12/08 20:33:40 Extracted 20 frames from video a2cb4dce-3e06-49ef-8db4-da0344698817
2025/12/08 20:33:40 Video a2cb4dce-3e06-49ef-8db4-da0344698817: Analyzing with 10 images (total frames: 20)
2025/12/08 20:33:40 Successfully compressed 10 images for video a2cb4dce-3e06-49ef-8db4-da0344698817
[GIN] 2025/12/08 - 20:33:44 | 200 |     216.333Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
2025/12/08 20:33:45 âœ… Video a2cb4dce-3e06-49ef-8db4-da0344698817 analyzed: has_dog=true, has_human=true, interaction=cuddling, emotion=happy, caption=ç‹—ç‹—é–‹å¿ƒè¢«ä¸»äººæŠ±è‘—ä¹˜è»Š
2025/12/08 20:33:45 Analyzed video a2cb4dce-3e06-49ef-8db4-da0344698817: 7 segments, 1 highlights
2025/12/08 20:33:45 âœ… Successfully analyzed 5/5 videos
2025/12/08 20:33:45 Generating story for project 68d695a7-a5c3-433d-a303-64e8cbe195de with AI
[GIN] 2025/12/08 - 20:33:49 | 200 |       170.5Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
2025/12/08 20:33:53 Story AI response content: {
  "title": "çµ¦ä¸»äººçš„å‘Šç™½",
  "chapters": [
    {
      "narration": "ä¸»äººï¼Œè·Ÿä½ åœ¨ä¸€èµ·çš„æ¯ä¸€åˆ»éƒ½å……æ»¿äº†æ„›å’Œæº«æš–ï¼Œæˆ‘çš„å¿ƒç¸½æ˜¯æš–æ´‹æ´‹çš„ã€‚",
      "video_index": 0,
      "highlight_index": 0
    },
    {
      "narration": "åœ¨åºŠä¸Šè·Ÿä½ ç©è€ï¼Œæ˜¯æˆ‘æœ€é–‹å¿ƒçš„æ™‚å…‰ï¼Œä½ çš„ç¬‘è²æ¯”ä»»ä½•ç©å…·éƒ½ç¾å¦™ã€‚",
      "video_index": 1,
      "highlight_index": 0
    },
    {
      "narration": "çª©åœ¨ä½ æ‡·è£¡ï¼Œæ˜¯æˆ‘æœ€å®‰å¿ƒçš„æ¸¯ç£ã€‚ä½ çš„æ°£å‘³ï¼Œä½ çš„å¿ƒè·³ï¼Œéƒ½è®“æˆ‘å¥½å¹³éœã€‚",
      "video_index": 2,
      "highlight_index": 0
    },
    {
      "narration": "å®¶è£¡å› ç‚ºæœ‰ä½ æ‰é€™éº¼ç†±é¬§ï¼Œæ¯æ¬¡è·Ÿä½ ç©ï¼Œæˆ‘éƒ½å……æ»¿äº†æ´»åŠ›ï¼Œè¬è¬ä½ é™ªæˆ‘ã€‚",
      "video_index": 3,
      "highlight_index": 0
    },
    {
      "narration": "ä¸»äººï¼Œæˆ‘çš„ä¸–ç•Œå› ä½ è€Œå®Œæ•´ã€‚æœ‰ä½ åœ¨ï¼Œå»å“ªéƒ½å¥½ã€‚æˆ‘æœƒæ°¸é ã€æ°¸é æ„›ä½ ã€‚",
      "video_index": 4,
      "highlight_index": 0
    }
  ]
}
2025/12/08 20:33:53 Generated story with 5 chapters
2025/12/08 20:33:53 Generating dog response for project 68d695a7-a5c3-433d-a303-64e8cbe195de
[GIN] 2025/12/08 - 20:33:54 | 200 |     245.958Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
2025/12/08 20:33:57 Warning: Failed to generate dog response: no response from AI
2025/12/08 20:33:57 Generating TTS for chapter 1: ä¸»äººï¼Œè·Ÿä½ åœ¨ä¸€èµ·çš„æ¯ä¸€åˆ»éƒ½å……æ»¿äº†æ„›å’Œæº«æš–ï¼Œæˆ‘çš„å¿ƒç¸½æ˜¯æš–æ´‹æ´‹çš„ã€‚
2025/12/08 20:33:57 Warning: TTS generation failed for chapter 0: TTS API error 403: {
  "error": {
    "code": 403,
    "message": "Cloud Text-to-Speech API has not been used in project 257160429328 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.",
    "status": "PERMISSION_DENIED",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "SERVICE_DISABLED",
        "domain": "googleapis.com",
        "metadata": {
          "service": "texttospeech.googleapis.com",
          "consumer": "projects/257160429328",
          "serviceTitle": "Cloud Text-to-Speech API",
          "activationUrl": "https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328",
          "containerInfo": "257160429328"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "Cloud Text-to-Speech API has not been used in project 257160429328 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."
      },
      {
        "@type": "type.googleapis.com/google.rpc.Help",
        "links": [
          {
            "description": "Google developers console API activation",
            "url": "https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328"
          }
        ]
      }
    ]
  }
}
2025/12/08 20:33:57 Generating TTS for chapter 2: åœ¨åºŠä¸Šè·Ÿä½ ç©è€ï¼Œæ˜¯æˆ‘æœ€é–‹å¿ƒçš„æ™‚å…‰ï¼Œä½ çš„ç¬‘è²æ¯”ä»»ä½•ç©å…·éƒ½ç¾å¦™ã€‚
2025/12/08 20:33:57 Warning: TTS generation failed for chapter 1: TTS API error 403: {
  "error": {
    "code": 403,
    "message": "Cloud Text-to-Speech API has not been used in project 257160429328 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.",
    "status": "PERMISSION_DENIED",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "SERVICE_DISABLED",
        "domain": "googleapis.com",
        "metadata": {
          "service": "texttospeech.googleapis.com",
          "activationUrl": "https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328",
          "containerInfo": "257160429328",
          "consumer": "projects/257160429328",
          "serviceTitle": "Cloud Text-to-Speech API"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "Cloud Text-to-Speech API has not been used in project 257160429328 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."
      },
      {
        "@type": "type.googleapis.com/google.rpc.Help",
        "links": [
          {
            "description": "Google developers console API activation",
            "url": "https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328"
          }
        ]
      }
    ]
  }
}
2025/12/08 20:33:57 Generating TTS for chapter 3: çª©åœ¨ä½ æ‡·è£¡ï¼Œæ˜¯æˆ‘æœ€å®‰å¿ƒçš„æ¸¯ç£ã€‚ä½ çš„æ°£å‘³ï¼Œä½ çš„å¿ƒè·³ï¼Œéƒ½è®“æˆ‘å¥½å¹³éœã€‚
2025/12/08 20:33:57 Warning: TTS generation failed for chapter 2: TTS API error 403: {
  "error": {
    "code": 403,
    "message": "Cloud Text-to-Speech API has not been used in project 257160429328 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.",
    "status": "PERMISSION_DENIED",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "SERVICE_DISABLED",
        "domain": "googleapis.com",
        "metadata": {
          "service": "texttospeech.googleapis.com",
          "consumer": "projects/257160429328",
          "serviceTitle": "Cloud Text-to-Speech API",
          "activationUrl": "https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328",
          "containerInfo": "257160429328"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "Cloud Text-to-Speech API has not been used in project 257160429328 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."
      },
      {
        "@type": "type.googleapis.com/google.rpc.Help",
        "links": [
          {
            "description": "Google developers console API activation",
            "url": "https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328"
          }
        ]
      }
    ]
  }
}
2025/12/08 20:33:57 Generating TTS for chapter 4: å®¶è£¡å› ç‚ºæœ‰ä½ æ‰é€™éº¼ç†±é¬§ï¼Œæ¯æ¬¡è·Ÿä½ ç©ï¼Œæˆ‘éƒ½å……æ»¿äº†æ´»åŠ›ï¼Œè¬è¬ä½ é™ªæˆ‘ã€‚
2025/12/08 20:33:57 Warning: TTS generation failed for chapter 3: TTS API error 403: {
  "error": {
    "code": 403,
    "message": "Cloud Text-to-Speech API has not been used in project 257160429328 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.",
    "status": "PERMISSION_DENIED",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "SERVICE_DISABLED",
        "domain": "googleapis.com",
        "metadata": {
          "activationUrl": "https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328",
          "consumer": "projects/257160429328",
          "containerInfo": "257160429328",
          "serviceTitle": "Cloud Text-to-Speech API",
          "service": "texttospeech.googleapis.com"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "Cloud Text-to-Speech API has not been used in project 257160429328 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."
      },
      {
        "@type": "type.googleapis.com/google.rpc.Help",
        "links": [
          {
            "description": "Google developers console API activation",
            "url": "https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328"
          }
        ]
      }
    ]
  }
}
2025/12/08 20:33:57 Generating TTS for chapter 5: ä¸»äººï¼Œæˆ‘çš„ä¸–ç•Œå› ä½ è€Œå®Œæ•´ã€‚æœ‰ä½ åœ¨ï¼Œå»å“ªéƒ½å¥½ã€‚æˆ‘æœƒæ°¸é ã€æ°¸é æ„›ä½ ã€‚
2025/12/08 20:33:57 Warning: TTS generation failed for chapter 4: TTS API error 403: {
  "error": {
    "code": 403,
    "message": "Cloud Text-to-Speech API has not been used in project 257160429328 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.",
    "status": "PERMISSION_DENIED",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "SERVICE_DISABLED",
        "domain": "googleapis.com",
        "metadata": {
          "containerInfo": "257160429328",
          "serviceTitle": "Cloud Text-to-Speech API",
          "activationUrl": "https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328",
          "service": "texttospeech.googleapis.com",
          "consumer": "projects/257160429328"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "Cloud Text-to-Speech API has not been used in project 257160429328 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."
      },
      {
        "@type": "type.googleapis.com/google.rpc.Help",
        "links": [
          {
            "description": "Google developers console API activation",
            "url": "https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328"
          }
        ]
      }
    ]
  }
}
2025/12/08 20:33:57 Compositing final video for project 68d695a7-a5c3-433d-a303-64e8cbe195de (with transitions, subtitles and music)
2025/12/08 20:33:57 Step 1: Creating video segments with transitions and TTS audio
2025/12/08 20:33:57 Creating video segments with fade transitions and TTS audio
[GIN] 2025/12/08 - 20:33:59 | 200 |     592.042Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
[GIN] 2025/12/08 - 20:34:04 | 200 |     130.792Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
[GIN] 2025/12/08 - 20:34:09 | 200 |     234.041Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
2025/12/08 20:34:10 âœ… Created video with transitions and TTS audio
2025/12/08 20:34:10 Step 2: Adding ending image with dog response
2025/12/08 20:34:10 Adding ending image with owner message and dog response
2025/12/08 20:34:10 Generating TTS for owner message: å¯¶è²ï¼Œè¬è¬ä½ ä¾†åˆ°æˆ‘çš„ç”Ÿå‘½ä¸­ï¼Œæˆ‘æœƒæ°¸é æ„›ä½ ï¼
2025/12/08 20:34:10 Warning: Failed to generate owner message TTS: TTS API error 403: {
  "error": {
    "code": 403,
    "message": "Cloud Text-to-Speech API has not been used in project 257160429328 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.",
    "status": "PERMISSION_DENIED",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "SERVICE_DISABLED",
        "domain": "googleapis.com",
        "metadata": {
          "activationUrl": "https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328",
          "consumer": "projects/257160429328",
          "containerInfo": "257160429328",
          "service": "texttospeech.googleapis.com",
          "serviceTitle": "Cloud Text-to-Speech API"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "Cloud Text-to-Speech API has not been used in project 257160429328 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."
      },
      {
        "@type": "type.googleapis.com/google.rpc.Help",
        "links": [
          {
            "description": "Google developers console API activation",
            "url": "https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328"
          }
        ]
      }
    ]
  }
}
2025/12/08 20:34:10 Generating TTS for dog response: ä¸»äººï¼Œæˆ‘æ„›ä½ ï¼
2025/12/08 20:34:10 Warning: Failed to generate dog response TTS: TTS API error 403: {
  "error": {
    "code": 403,
    "message": "Cloud Text-to-Speech API has not been used in project 257160429328 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.",
    "status": "PERMISSION_DENIED",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "SERVICE_DISABLED",
        "domain": "googleapis.com",
        "metadata": {
          "serviceTitle": "Cloud Text-to-Speech API",
          "service": "texttospeech.googleapis.com",
          "containerInfo": "257160429328",
          "consumer": "projects/257160429328",
          "activationUrl": "https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "Cloud Text-to-Speech API has not been used in project 257160429328 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."
      },
      {
        "@type": "type.googleapis.com/google.rpc.Help",
        "links": [
          {
            "description": "Google developers console API activation",
            "url": "https://console.developers.google.com/apis/api/texttospeech.googleapis.com/overview?project=257160429328"
          }
        ]
      }
    ]
  }
}
2025/12/08 20:34:11 Ending duration: 8.00s (owner: 0.00s, dog: 0.00s)
2025/12/08 20:34:11 Warning: Failed to combine audio: exit status 254, output: ffmpeg version 7.1.1 Copyright (c) 2000-2025 the FFmpeg developers
  built with Apple clang version 17.0.0 (clang-1700.0.13.3)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1.1_3 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags='-Wl,-ld_classic' --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon
  libavutil      59. 39.100 / 59. 39.100
  libavcodec     61. 19.101 / 61. 19.101
  libavformat    61.  7.100 / 61.  7.100
  libavdevice    61.  3.100 / 61.  3.100
  libavfilter    10.  4.100 / 10.  4.100
  libswscale      8.  3.100 /  8.  3.100
  libswresample   5.  3.100 /  5.  3.100
  libpostproc    58.  3.100 / 58.  3.100
[in#0 @ 0x131f06d50] Error opening input: No such file or directory
Error opening input file storage/projects/68d695a7-a5c3-433d-a303-64e8cbe195de/owner_message.mp3.
Error opening input files: No such file or directory
2025/12/08 20:34:11 Warning: Failed to add ending image: failed to create ending image video: exit status 254, output: ffmpeg version 7.1.1 Copyright (c) 2000-2025 the FFmpeg developers
  built with Apple clang version 17.0.0 (clang-1700.0.13.3)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1.1_3 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags='-Wl,-ld_classic' --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon
  libavutil      59. 39.100 / 59. 39.100
  libavcodec     61. 19.101 / 61. 19.101
  libavformat    61.  7.100 / 61.  7.100
  libavdevice    61.  3.100 / 61.  3.100
  libavfilter    10.  4.100 / 10.  4.100
  libswscale      8.  3.100 /  8.  3.100
  libswresample   5.  3.100 /  5.  3.100
  libpostproc    58.  3.100 / 58.  3.100
[mjpeg @ 0x13af05c90] EOI missing, emulating
Input #0, image2, from 'storage/projects/68d695a7-a5c3-433d-a303-64e8cbe195de/ending_image.jpg':
  Duration: 00:00:00.04, start: 0.000000, bitrate: 1124 kb/s
  Stream #0:0: Video: mjpeg (Baseline), yuvj420p(pc, bt470bg/unknown/unknown), 1280x720 [SAR 1:1 DAR 16:9], 25 fps, 25 tbr, 25 tbn
[in#1 @ 0x13af0cc40] Error opening input: No such file or directory
Error opening input file storage/projects/68d695a7-a5c3-433d-a303-64e8cbe195de/owner_message.mp3.
Error opening input files: No such file or directory
, continuing without it
2025/12/08 20:34:11 Step 3: Adding subtitles
2025/12/08 20:34:11 Adding subtitles to video for project 68d695a7-a5c3-433d-a303-64e8cbe195de
[GIN] 2025/12/08 - 20:34:14 | 200 |         273Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
[GIN] 2025/12/08 - 20:34:19 | 200 |     231.916Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
2025/12/08 20:34:24 âœ… Added subtitles for project 68d695a7-a5c3-433d-a303-64e8cbe195de (including ending)
2025/12/08 20:34:24 Step 4: Adding background music
2025/12/08 20:34:24 Adding background music to video for project 68d695a7-a5c3-433d-a303-64e8cbe195de
2025/12/08 20:34:24 ğŸµ Checking for specific BGM file: ./ç‹—ç‹—å½±ç‰‡/bibi-pianopachelbels-canon-ç»ˆäºå¼¹äº†è¿™é¦–-ä¸–ç•Œä¸Šæœ€æ²»æ„ˆçš„é’¢ç´æ›²å¡å†œ.mp3
2025/12/08 20:34:24 âœ… Found specific BGM file: ./ç‹—ç‹—å½±ç‰‡/bibi-pianopachelbels-canon-ç»ˆäºå¼¹äº†è¿™é¦–-ä¸–ç•Œä¸Šæœ€æ²»æ„ˆçš„é’¢ç´æ›²å¡å†œ.mp3 (size: 5214241 bytes)
2025/12/08 20:34:24 ğŸ“– Successfully read BGM file, size: 5214241 bytes
2025/12/08 20:34:24 âœ… Successfully copied BGM to: storage/projects/68d695a7-a5c3-433d-a303-64e8cbe195de/background_music.mp3 (size: 5214241 bytes)
[GIN] 2025/12/08 - 20:34:24 | 200 |     109.792Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
2025/12/08 20:34:24 Audio mix failed, trying direct add: exit status 234
[GIN] 2025/12/08 - 20:34:24 | 200 |     111.875Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
2025/12/08 20:34:25 Added background music for project 68d695a7-a5c3-433d-a303-64e8cbe195de
2025/12/08 20:34:25 âœ… Created final video with all effects for project 68d695a7-a5c3-433d-a303-64e8cbe195de
2025/12/08 20:34:25 Project 68d695a7-a5c3-433d-a303-64e8cbe195de completed successfully
[GIN] 2025/12/08 - 20:34:29 | 200 |         429Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
[GIN] 2025/12/08 - 20:35:00 | 200 |     139.583Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
[GIN] 2025/12/08 - 20:35:20 | 200 |         189Âµs |             ::1 | GET      "/api/v2/story/projects/68d695a7-a5c3-433d-a303-64e8cbe195de"
